# Revision-1 Integration

- What do we mean when we say integration?
    - integrate salesforce with external system.
    - transfering data from salesforce to external system or vice versa.

- Message format
    - types: `JSON`, `XML`
    - format of text to communicate between two systems.
    - Example of `JSON`
        ~~~
        {
            "name": "George",
            "age": 50,
            "phone": "32165497"
        }
        ~~~ 
        - is below JSON valid?
                ~~~
                [
                    {
                        "name": "George",
                        "age": 50,
                        "phone": "32165497"
                    }, 
                    {
                        "name": "Keyle",
                        "age": 35,
                        "phone": "1234657",
                        "country": "USA"
                    }
                ]
                ~~~ 

                ~~~
                {
                    "users" : [
                        {
                        "name": "George",
                        "age": 50,
                        "phone": "32165497"
                        }, 
                        {
                            "name": "Keyle",
                            "age": 35,
                            "phone": "1234657",
                            "country": "USA"
                        }
                    ],
                    "total": 50,
                    "skil": 0
                }
                ~~~ 
    - How can we convert sObject or Object to JSON in apex?
        - `JSON.serialize(sobject)`
    - If we want to convert JSON string to sObject or Object then we use `deserialize`.
    
- Types of integration:
    - SOAP and REST

- REST Callout
    - callout means calling from salesforce to external system.
    - Pre-requsites to do a callout
        - Method: `GET`, `POST`, `PUT`, `DELETE`
        - Endpoint: url or api
        - Headers: we send key or credentials etc
        - Body (not for GET): requested body

- Most important required step before we can do the callout
    - We MUST add the endpoint in remote site settings.
- Callout Code blueprint:
    1. Prepare request, in apex we call it `httprequest`, in this we set method, body, endpoint (api), headers etc.
    2. Prepare new instance of http (internet)
    3. Send Request using http and we get response which we store in `HttpResponse`
    4. Process the response
        - what are statusCode? 
            - if the request passed or failed we can understand from statusCode. 
            - Example: 
                - 200-299 is SUCCESS. Usually 200.
                - 400-499 Failure. 404 is NOT FOUND
                - 500s is server error.
        - getBody(): in which format we get the body?
            - json String
        - We create custom object and we want to store data from response in custom object.
            - we create a Wrapper class which can convert json response string to instance of that wrapper class. Deserialize JSON STRING TO Class
                - how to create wrapper class?
                    1. We manually create by matching each and every field with class variables
                    2. some jsonToApex tool (provide class name) -> class files.
                        - we create same name class in org (VS code or Developer Console), copy past the code generated by the tool
            - we convert that wrapper class to sObject
                - insert
